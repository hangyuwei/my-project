# 项目上线检查清单

使用本清单确保项目在上线前完成所有必要的准备工作。

## 阶段一: 开发准备 (Day 1-3)

### 环境配置
- [ ] 开通微信小程序账号并完成认证
- [ ] 开通腾讯云开发服务
- [ ] 创建开发环境和生产环境
- [ ] 获取并保存环境ID、SecretId、SecretKey
- [ ] 配置本地开发环境(Node.js, 微信开发者工具)
- [ ] 项目代码已成功克隆并运行

### 数据库初始化
- [ ] 创建 `goods` 集合
- [ ] 创建 `user` 集合
- [ ] 创建 `order` 集合
- [ ] 创建 `salesPromotion` 集合
- [ ] 配置数据库权限规则
- [ ] 添加必要的数据库索引
  - [ ] goods.sku (唯一索引)
  - [ ] goods.goodName (文本索引)
  - [ ] goods.status (普通索引)
  - [ ] order.id (唯一索引)
  - [ ] order.userId (普通索引)
  - [ ] 复合索引: order(userId + status)

### 云函数部署
- [ ] 部署 getHome 云函数
- [ ] 部署 getGoodsList 云函数
- [ ] 部署 getGood 云函数
- [ ] 部署 searchGoods 云函数
- [ ] 部署其他必要的云函数
- [ ] 测试所有云函数是否正常工作
- [ ] 查看云函数日志,确认无错误

---

## 阶段二: 功能开发 (Day 4-8)

### 小程序功能
- [ ] 首页展示正常(Banner、商品列表)
- [ ] 商品列表页可正常浏览
- [ ] 商品详情页显示完整信息
- [ ] 商品搜索功能正常
- [ ] 购物车添加/删除功能正常
- [ ] 购物车数量统计正确
- [ ] 订单创建流程正常
- [ ] 订单列表显示正确
- [ ] 订单详情查看正常
- [ ] 售后申请流程正常
- [ ] 个人中心信息显示
- [ ] 地址管理功能正常
- [ ] 优惠券领取/使用功能

### 管理后台功能
- [ ] 登录验证功能正常(如已实现)
- [ ] Dashboard数据统计正确
- [ ] 商品列表展示正常
- [ ] 商品新增功能正常
- [ ] 商品编辑功能正常
- [ ] 商品删除功能正常
- [ ] 商品上架/下架功能正常
- [ ] 图片上传功能正常
- [ ] 订单列表展示正常
- [ ] 订单详情查看正常
- [ ] 订单状态修改功能
- [ ] 用户列表展示正常
- [ ] 促销活动管理功能

---

## 阶段三: 数据准备 (Day 9-10)

### 商品数据
- [ ] 准备至少10个商品数据
- [ ] 每个商品包含:
  - [ ] 商品名称
  - [ ] 价格信息
  - [ ] 库存数量
  - [ ] 封面图(coverImage)
  - [ ] 展示图(galleryImages, 至少3张)
  - [ ] 详情图(detailImages, 至少5张)
  - [ ] 商品描述
  - [ ] SKU编码(唯一)
- [ ] 所有商品状态设为 "online"
- [ ] 图片已上传到云存储
- [ ] 图片链接可正常访问

### 其他数据
- [ ] 首页Banner图片已配置
- [ ] 活动/促销数据已添加
- [ ] 优惠券数据已创建(如需要)
- [ ] 测试用户账号已创建

---

## 阶段四: 测试验证 (Day 11-12)

### 功能测试
- [ ] 小程序端到端测试
  - [ ] 浏览商品 → 加入购物车 → 下单 完整流程
  - [ ] 搜索商品功能
  - [ ] 订单查看和管理
  - [ ] 个人中心各项功能
- [ ] 管理后台端到端测试
  - [ ] 商品管理完整流程
  - [ ] 订单管理完整流程
  - [ ] 数据统计准确性
- [ ] 异常场景测试
  - [ ] 网络异常处理
  - [ ] 库存不足提示
  - [ ] 表单验证
  - [ ] 错误提示信息

### 性能测试
- [ ] 小程序启动时间 < 3秒
- [ ] 首页加载时间 < 2秒
- [ ] 商品列表滚动流畅
- [ ] 图片加载速度合理
- [ ] 云函数响应时间 < 1秒
- [ ] 管理后台页面加载流畅

### 兼容性测试
- [ ] iOS微信测试正常
- [ ] Android微信测试正常
- [ ] 不同屏幕尺寸显示正常
- [ ] 管理后台在Chrome测试正常
- [ ] 管理后台在Safari测试正常

### 数据验证
- [ ] 商品数据显示正确
- [ ] 价格计算准确
- [ ] 库存扣减正确
- [ ] 订单数据完整
- [ ] 图片路径正确

---

## 阶段五: 部署上线 (Day 13-14)

### 小程序部署
- [ ] 切换到生产环境配置
- [ ] 设置 `useMock: false`
- [ ] 清理开发调试代码
- [ ] 清理 console.log
- [ ] 配置服务器域名白名单
  - [ ] request合法域名
  - [ ] uploadFile合法域名
  - [ ] downloadFile合法域名
- [ ] 构建npm
- [ ] 上传代码到微信公众平台
- [ ] 填写版本号和更新说明
- [ ] 提交审核
- [ ] 准备审核资料:
  - [ ] 小程序介绍
  - [ ] 服务类目
  - [ ] 测试账号(如需要)
  - [ ] 隐私政策(如需要)

### 管理后台部署
- [ ] 配置生产环境变量
- [ ] 检查 Dockerfile 配置
- [ ] 本地构建测试成功
- [ ] 创建云托管服务
- [ ] 上传代码/连接Git仓库
- [ ] 设置环境变量:
  - [ ] CLOUDBASE_ENV_ID
  - [ ] CLOUDBASE_SECRET_ID
  - [ ] CLOUDBASE_SECRET_KEY
  - [ ] PORT
  - [ ] NODE_ENV=production
- [ ] 部署成功并访问测试
- [ ] 绑定自定义域名(可选)
- [ ] 配置HTTPS证书

---

## 阶段六: 安全和优化

### 安全检查
- [ ] 敏感信息已使用环境变量
- [ ] SecretId/Key未提交到代码库
- [ ] 数据库权限已正确配置
- [ ] API已添加参数验证
- [ ] 管理后台已添加登录验证(如需要)
- [ ] 云函数已添加必要的权限检查
- [ ] 检查代码中无硬编码密码/密钥
- [ ] 用户输入已进行转义处理

### 性能优化
- [ ] 图片已压缩优化
- [ ] 数据库索引已创建
- [ ] 云函数代码已优化
- [ ] 小程序已启用分包加载(如需要)
- [ ] 图片已启用懒加载
- [ ] API响应已添加缓存策略

### 监控配置
- [ ] 配置云函数监控告警
- [ ] 配置数据库容量告警
- [ ] 配置云托管服务监控
- [ ] 小程序错误上报已启用
- [ ] 准备好日志查看方式

---

## 阶段七: 发布前最后检查

### 内容审核
- [ ] 商品信息真实准确
- [ ] 图片内容合规
- [ ] 价格信息正确
- [ ] 无违禁词汇
- [ ] 无夸大宣传
- [ ] 隐私政策完整(如需要)
- [ ] 用户协议完整(如需要)

### 业务准备
- [ ] 客服联系方式已配置
- [ ] 售后流程已明确
- [ ] 物流/配送方案已确定(如适用)
- [ ] 支付方式已配置(如需要)
- [ ] 订单处理流程已明确

### 备份和回滚
- [ ] 数据库已备份
- [ ] 代码已打标签(Git Tag)
- [ ] 云函数已备份
- [ ] 准备回滚方案
- [ ] 记录当前版本号

---

## 上线后监控 (上线后48小时)

### 即时监控
- [ ] 监控云函数调用量
- [ ] 监控云函数错误率
- [ ] 监控数据库请求量
- [ ] 监控小程序访问量
- [ ] 查看用户反馈
- [ ] 检查支付流程(如适用)

### 数据验证
- [ ] 检查订单数据正确性
- [ ] 检查库存扣减准确性
- [ ] 检查用户数据完整性
- [ ] 检查统计数据准确性

### 问题应对
- [ ] 准备紧急修复流程
- [ ] 准备客服应答话术
- [ ] 准备故障处理预案
- [ ] 建立快速响应机制

---

## 持续优化 (上线后1-2周)

### 用户反馈
- [ ] 收集用户反馈
- [ ] 分析用户行为数据
- [ ] 识别高频问题
- [ ] 优化用户体验

### 性能监控
- [ ] 分析页面加载时间
- [ ] 优化慢查询
- [ ] 优化图片加载
- [ ] 调整云函数配置

### 功能迭代
- [ ] 整理功能优化需求
- [ ] 规划下一版本功能
- [ ] 准备功能迭代计划

---

## 关键指标跟踪

### 技术指标
- 小程序启动耗时: _____ ms (目标: <3000ms)
- 首页加载耗时: _____ ms (目标: <2000ms)
- 云函数平均响应时间: _____ ms (目标: <1000ms)
- 云函数错误率: _____ % (目标: <1%)
- 数据库查询平均耗时: _____ ms (目标: <500ms)

### 业务指标
- 日活用户数(DAU): _____
- 商品浏览量: _____
- 购物车转化率: _____ %
- 订单完成率: _____ %
- 用户留存率: _____ %

---

## 紧急联系人

**技术负责人:**
姓名: _________
电话: _________
微信: _________

**云服务商支持:**
腾讯云工单: https://console.cloud.tencent.com/workorder

**微信小程序支持:**
微信开放社区: https://developers.weixin.qq.com/community/

---

## 备注

**上线时间规划:**
- 预计提审时间: __________
- 预计审核通过时间: __________
- 正式发布时间: __________

**重要提醒:**
1. 小程序首次审核通常需要1-7个工作日,请预留充足时间
2. 发布前务必在生产环境完整测试一遍
3. 上线后前48小时需密切监控各项指标
4. 保持团队沟通渠道畅通,及时响应问题

**版本记录:**
| 版本号 | 发布时间 | 主要更新 | 备注 |
|--------|----------|----------|------|
| v1.0.0 | YYYY-MM-DD | 初始版本 |      |
|        |            |          |      |

---

## ✅ 签字确认

**开发负责人:** _________ 日期: _________

**测试负责人:** _________ 日期: _________

**产品负责人:** _________ 日期: _________

---

## 附录: 常见问题快速解决

### 小程序审核被拒
- 检查是否符合《微信小程序平台运营规范》
- 补充必要的资质证明
- 优化用户协议和隐私政策
- 根据审核意见修改后重新提交

### 云函数调用失败
- 查看云函数日志定位问题
- 检查环境ID配置
- 检查数据库权限
- 检查网络连接

### 管理后台无法访问
- 检查云托管服务状态
- 查看部署日志
- 检查环境变量配置
- 检查域名解析

### 数据显示异常
- 检查数据库数据完整性
- 检查数据适配层逻辑
- 清除小程序缓存重试
- 查看云函数返回数据

### 图片无法显示
- 检查云存储文件是否存在
- 检查图片URL是否正确
- 检查域名是否在白名单
- 检查图片访问权限
